<!doctype html>
<html>
<head>

</head>

<body>
    <canvas id="c" width = "500" height = "500" ></canvas>
    <img id="drag2" class="drag" src="image/drag2.svg" draggable="true" ondragstart="drag(event)" class="image">
    <img id="drag3" class="drag" src="image/drag3.svg" draggable="true" ondragstart="drag(event)" class="image">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>
    $( document ).ready(function() {
        var canvas = $("#c");
        var c = canvas[0].getContext("2d");
          var path = "image/drag2.svg";
    var image1 = new DragImage(path, 200, 100);
    var path2 = "image/drag3.svg";
    var image2 = new DragImage(path2, 200, 100);
    image1.update();
    image2.update();
    $(".drag").click(function(event){


    });
var loop = setInterval(function() {

    c.fillStyle = "gray";
    c.fillRect(0, 0, 500, 500);

    
}, 30);

var mouseX = 0,
    mouseY = 0;
var mousePressed = false;
var dragging = false;
canvas.mousemove(function(e) {
    mouseX = e.offsetX;
    mouseY = e.offsetY;
})

$(document).mousedown(function() {
    mousePressed = true;
}).mouseup(function() {
    mousePressed = false;
    dragging = false;
});

function DragImage(src, x, y) {
    var that = this;
    var startX = 0,
        startY = 0;
    var drag = false;
    
    this.x = x;
    this.y = y;
    var img = new Image();
    img.src = src;
    this.update = function() {
        if (mousePressed ) {
            
                var left = that.x;
                var right = that.x + img.width;
                var top = that.y;
                var bottom = that.y + img.height;
                if (!drag) {
                    startX = mouseX - that.x;
                    startY = mouseY - that.y;
                }
                if (mouseX < right && mouseX > left && mouseY < bottom && mouseY > top) {
                    if (!dragging){
            dragging = true;
                        drag = true;
                    }
                    
                }
            
        } else {
             
            drag = false;
        }
        if (drag) {
            that.x = mouseX - startX;
            that.y = mouseY - startY;
        }
        c.drawImage(img, that.x, that.y);
    }
}
});
</script>
</body>
</html>